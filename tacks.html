<!DOCTYPE html>
<html lang="en-UK">
<head>
	<meta charset="utf-8"/>
	<title>Paperclips</title>
	<meta name="viewport" content="width=device-width"/>
<style>
body{
	align-content: center;
	text-align: center;
}
h1 {
	text-align: center;
}
h2 {
	margin: 8px;
}
button{
	font-size: 16px;
	padding: 8px;
	margin: 4px;
	color: white;
	background-color: black;
	transition-duration: 0.2s;
}
button:hover{
	background-color: coral;

}
label{
	font-size: 24px;
	color: black;
	padding: 12px;
}
label.small{
	font-size: 16px;
	padding: 2px;
}
footer {
	position: fixed;
	left: 0;
	bottom: 0;
	width: 100%;
	text-align: center;
	align-content: center;
}
</style>
</head>
<! ========================================================================= >
<body>
	<div>
		<h1>Tacks</h1>
		<p style="text-align:center" id="tpsLbl">Click to increment.</p>

		<label id="lbl">0</label>
		<br>
		<button id="btn">Boop</button>
	</div>
	<div style="margin:48px">
		<h2> Upgrades & Automation</h2>
		<div>
			<button id="fingerBtn">Buy Extra Finger</button>
			<div>
				+0.25 per click <br>
				Cost: 20
				<br>
				Owned:<label class="small" id="fingerLbl">0</label>
			</div>
		</div>
		<div>
			<button id="workerBtn">Buy Worker</button>
			<div>
				+0.5 per second <br>
				Cost: 100
				<br>
				Owned:<label class="small" id="workerLbl">0</label>
			</div>
		</div>
	</div>

<footer>
	Â© Ryan Appleyard MMXXV
</footer>


</body>

<! ========================================================================= >

<script>

let tacks = 0;
let TPS = 0;
let timeAdjust = 1000 / 24;

let lbl = document.getElementById("lbl");
let tpsLbl = document.getElementById("tpsLbl");
let fingerAmount = 0;
let workerAmount = 0;

const AutoValue = {
	FINGER: 0.25,
	WORKER: 0.5
};

const AutoPrice = {
	FINGER: 20,
	WORKER: 0
}

document.getElementById("btn").addEventListener("click", context=>{
Increment((fingerAmount * AutoValue.FINGER) + 1);
});

document.getElementById("fingerBtn").addEventListener("click", context=>{
if(Buy("finger", 1, AutoPrice.FINGER)) fingerAmount++;
});

document.getElementById("workerBtn").addEventListener("click", context=>{
if(Buy("worker", 1, AutoPrice.WORKER)) workerAmount++;
});

setInterval(Automation, 1000);
setInterval(Display, timeAdjust);

function Increment(amount){
	tacks += amount;
}

function IncrementSpecific(amount, name){
	var label = document.getElementById(name + "Lbl");
	currentNo = parseFloat(label.textContent) + amount;
	label.textContent = Math.floor(currentNo);
}

function Decrement(amount){
	tacks -= amount;
}

function CanAfford(price){
	return true ? price <= parseInt(tacks, 10) : false;
}

function Buy(type, amount, price){
	if(CanAfford(price)){
		Decrement(price);
		IncrementSpecific(amount, type);
		console.log("Bought: " + amount + "x " + type);
		return true;
	}
	else{
		console.log("Can't afford another " + type);
		return false;
	}		
}

function Automation(){
	let workerSeconds = 1 / AutoValue.WORKER;
	tpsLbl.textContent = "Tacks p/s: " + TPS;
	CalculateTPS();
}

function Display(){
	CalculateTPS();
	Increment(TPS / timeAdjust);
	lbl.textContent = Math.floor(tacks);
}

function CalculateTPS(){
	TPS = AutoValue.WORKER * workerAmount;
}

</script>

</html>